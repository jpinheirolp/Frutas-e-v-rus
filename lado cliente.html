<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        #tela{
            border: 1px solid #000;
            
        }
    </style>
</head>
<body style="background-color: #2eb4a9d0;">
   
    <canvas id="tela" width = "1400" height = "900" > </canvas>

    <script type="module">              
        
        const tela = document.getElementById("tela");
        const contexto = tela.getContext("2d");

        import fabricajogo from './jogo.js' ;
        
        const jogo = fabricajogo();
        
        import fabricaregras from './regras.js';
        
        import fabricarepetidor from './repetidor.js';
        
        const repetidor = fabricarepetidor();
        
        document.addEventListener("keydown", repetidor.Propagar);
        
        import fabricaclock from './clock.js';
        
        const clock = fabricaclock();
        
        import fabricadetectormovimento from './detectormovimento.js';

        const detectormovimento = fabricadetectormovimento();

        const regras = fabricaregras(jogo,detectormovimento);
        
        // observador de colisão é chamado quando a matriz posiçãojogadores é atualizada
        
        jogo.funcoes.Gerarjogador("jogador1");

        clock.AdicionarOuvinte(jogo.funcoes.Gerarfruta);
        clock.AdicionarOuvinte(regras.Terfome);

        clock.Propagar();
        
        repetidor.AdicionarOuvinte(regras.Movimentar);
        
        detectormovimento.AdicionarOuvinte(jogo.funcoes.Atualizaposicaojogadores);
        detectormovimento.AdicionarOuvinte(regras.Comerfruta);

        import pintatela from './pintatela.js';

        pintatela(contexto,jogo);
         


        
    </script>
</body>
</html>